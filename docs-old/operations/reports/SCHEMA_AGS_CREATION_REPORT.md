# üèóÔ∏è –û–¢–ß–ï–¢ –û –°–û–ó–î–ê–ù–ò–ò –°–•–ï–ú–´ AGS

## üìã –û–±–∑–æ—Ä

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Fish_Eye (PostgreSQL)  
**–°—Ö–µ–º–∞:** ags  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–ª–µ–≤–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü –∏–∑ MS SQL Server

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã
```sql
CREATE SCHEMA IF NOT EXISTS ags;
```
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –°—Ö–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```sql
GRANT USAGE ON SCHEMA ags TO postgres;
GRANT CREATE ON SCHEMA ags TO postgres;
GRANT ALL ON SCHEMA ags TO postgres;
```
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å postgres:** –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å—Ö–µ–º—É

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
CREATE TABLE ags.migration_log (
    id SERIAL PRIMARY KEY,
    table_name VARCHAR(255) NOT NULL,
    migration_status VARCHAR(50) DEFAULT 'pending',
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP,
    rows_migrated INTEGER DEFAULT 0,
    error_message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
```sql
CREATE INDEX idx_migration_log_table_name ON ags.migration_log(table_name);
CREATE INDEX idx_migration_log_status ON ags.migration_log(migration_status);
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —Ç–∞–±–ª–∏—Ü—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –º–∏–≥—Ä–∞—Ü–∏–∏
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ö–µ–º—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ö–µ–º—ã ags:
```
ags/
‚îú‚îÄ‚îÄ migration_log (—Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ id (SERIAL PRIMARY KEY)
‚îÇ   ‚îú‚îÄ‚îÄ table_name (VARCHAR(255))
‚îÇ   ‚îú‚îÄ‚îÄ migration_status (VARCHAR(50))
‚îÇ   ‚îú‚îÄ‚îÄ started_at (TIMESTAMP)
‚îÇ   ‚îú‚îÄ‚îÄ completed_at (TIMESTAMP)
‚îÇ   ‚îú‚îÄ‚îÄ rows_migrated (INTEGER)
‚îÇ   ‚îú‚îÄ‚îÄ error_message (TEXT)
‚îÇ   ‚îî‚îÄ‚îÄ created_at (TIMESTAMP)
```

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
- **CREATE:** ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ
- **USAGE:** ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ
- **ALL:** ‚úÖ –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ –°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è:
1. **–°–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü** - –ø—Ä–∞–≤–∞ CREATE –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
2. **–í—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∞–≤–∞ USAGE –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞** - —Ç–∞–±–ª–∏—Ü–∞ migration_log —Å–æ–∑–¥–∞–Ω–∞
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫** - –ø–æ–ª—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü:
1. **69 —Ç–∞–±–ª–∏—Ü –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
2. **97 —Ç–∞–±–ª–∏—Ü —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏** - –ø–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. **–í—Å–µ–≥–æ 166 —Ç–∞–±–ª–∏—Ü** - –ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–ù–∞—á–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Ç–∞–±–ª–∏—Ü –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É migration_log –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è**
3. **–°–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ ags**

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫:
1. **–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** (cnInvCmmGr, cnInvCmmTp, etc.)
2. **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö** (cn_inv_doc, inv, JuUnDoc)
3. **–ò–º–ø–æ—Ä—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** (importDbt_*, importMnrl_*)
4. **–°–ª—É–∂–µ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** (mmmm, qqqq, yyyy)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—Ö–µ–º–µ:
```python
# –ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å—Ö–µ–º–µ ags
import psycopg2

conn = psycopg2.connect(
    host='localhost',
    port=5432,
    database='Fish_Eye',
    user='postgres',
    password='postgres'
)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ search_path –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ö–µ–º–æ–π ags
with conn.cursor() as cur:
    cur.execute('SET search_path = ags, public;')
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –Ω–∞—á–∞–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
INSERT INTO ags.migration_log (table_name, migration_status, started_at)
VALUES ('table_name', 'in_progress', CURRENT_TIMESTAMP);

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
UPDATE ags.migration_log 
SET migration_status = 'completed', 
    completed_at = CURRENT_TIMESTAMP,
    rows_migrated = 1000
WHERE table_name = 'table_name';
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°—Ö–µ–º–∞ ags –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü!**

### ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- –°—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã
- –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤–∞
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω—ã

### üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 100%

**–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Ç–∞–±–ª–∏—Ü –∏–∑ MS SQL Server –≤ PostgreSQL!**

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 29 —Å–µ–Ω—Ç—è–±—Ä—è 2025*  
*–ê–≤—Ç–æ—Ä: AI Assistant*  
*–°—Ç–∞—Ç—É—Å: –°–•–ï–ú–ê –ì–û–¢–û–í–ê –ö –ú–ò–ì–†–ê–¶–ò–ò*