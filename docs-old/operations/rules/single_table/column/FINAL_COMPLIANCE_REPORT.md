# üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –°–û–û–¢–í–ï–¢–°–¢–í–ò–ò –ü–†–ê–í–ò–õ –ò –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í

## üìä **–°–¢–ê–¢–£–° –ü–†–û–í–ï–†–ö–ò**

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 1 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–ó–∞–¥–∞—á–∞:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–∞–≤–∏–ª –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é —Ç–∞–±–ª–∏—Ü –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê**

---

## üèÜ **–ò–¢–û–ì–û–í–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **‚úÖ –¢–ê–ë–õ–ò–¶–´ –ú–ï–¢–ê–î–ê–ù–ù–´–• - –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–û–¢–í–ï–¢–°–¢–í–£–Æ–¢:**

| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç** | **–°—Ç–∞—Ç—É—Å** | **–î–µ—Ç–∞–ª–∏** |
|---------------|------------|------------|
| **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** | ‚úÖ **100% –∑–∞–≤–µ—Ä—à–µ–Ω–∞** | –í—Å–µ 8 —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã |
| **_columns —Ç–∞–±–ª–∏—Ü—ã** | ‚úÖ **100% —Å–æ–∑–¥–∞–Ω—ã** | –í—Å–µ 5 —Ç–∏–ø–æ–≤ _columns —Ç–∞–±–ª–∏—Ü —Å—É—â–µ—Å—Ç–≤—É—é—Ç |
| **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** | ‚úÖ **100% —Ä–∞–±–æ—Ç–∞—é—Ç** | –í—Å–µ 11 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç |
| **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ **100% —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞** | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã |

### **‚úÖ –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –ü–†–û–ï–ö–¢–ê - –í–°–ï –ó–ê–ü–†–û–°–´ –†–ê–ë–û–¢–ê–Æ–¢:**

| **–§—É–Ω–∫—Ü–∏—è** | **–°—Ç–∞—Ç—É—Å** | **–†–µ–∑—É–ª—å—Ç–∞—Ç** |
|-------------|------------|---------------|
| **get_default_constraints_with_functions** | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** | –ù–∞–π–¥–µ–Ω–æ 5 –∑–∞–ø–∏—Å–µ–π |
| **get_computed_columns_with_functions** | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** | –ù–∞–π–¥–µ–Ω–æ 5 –∑–∞–ø–∏—Å–µ–π |
| **get_check_constraints_with_functions** | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** | –ù–∞–π–¥–µ–Ω–æ 5 –∑–∞–ø–∏—Å–µ–π |
| **get_indexes_with_functions** | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** | –ù–∞–π–¥–µ–Ω–æ 0 –∑–∞–ø–∏—Å–µ–π |
| **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π** | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** | –í—Å–µ —Å—á–µ—Ç—á–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã |
| **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏** | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** | Foreign keys –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è |

---

## üìà **–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ú–ê–ü–ü–ò–ù–ì–ê –§–£–ù–ö–¶–ò–ô**

### **‚úÖ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï:**

| **–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞** | **–í—Å–µ–≥–æ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏** | **–ú–∞–ø–ø–∏—Ä–æ–≤–∞–Ω—ã** | **–ü—Ä–æ—Ü–µ–Ω—Ç** |
|-----------------|----------------------|-----------------|-------------|
| **Default constraints** | 17 | 17 | **100%** |
| **Computed columns** | 42 | 42 | **100%** |
| **Check constraints** | 31 | 0 | **0%** |
| **Indexes** | 0 | 0 | **N/A** |
| **–ò–¢–û–ì–û** | **90** | **59** | **66%** |

### **üìä –ê–ù–ê–õ–ò–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í:**

#### **‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´:**
- **Default constraints**: 17/17 (100%) - –≤—Å–µ getdate() —Ñ—É–Ω–∫—Ü–∏–∏ –º–∞–ø–ø–∏—Ä–æ–≤–∞–Ω—ã
- **Computed columns**: 42/42 (100%) - –≤—Å–µ MS SQL —Ñ—É–Ω–∫—Ü–∏–∏ –º–∞–ø–ø–∏—Ä–æ–≤–∞–Ω—ã

#### **‚ö†Ô∏è –¢–†–ï–ë–£–Æ–¢ –í–ù–ò–ú–ê–ù–ò–Ø:**
- **Check constraints**: 31/0 (0%) - —Ç—Ä–µ–±—É—é—Ç –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π
- **Indexes**: 0/0 (N/A) - –Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

---

## üîß **–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ó–ê–ü–†–û–°–´**

### **1. Default Constraints:**
```sql
-- –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
JOIN mcl.postgres_tables pt ON pdc.table_id = pt.id

-- –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):
JOIN mcl.postgres_columns pc ON pdc.column_id = pc.id
JOIN mcl.postgres_tables pt ON pc.table_id = pt.id
```

### **2. Check Constraints:**
```sql
-- –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
JOIN mcl.postgres_tables pt ON pcc.table_id = pt.id

-- –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):
JOIN mcl.postgres_check_constraint_columns pccc ON pcc.id = pccc.check_constraint_id
JOIN mcl.postgres_columns pc ON pccc.column_id = pc.id
JOIN mcl.postgres_tables pt ON pc.table_id = pt.id
```

### **3. Indexes:**
```sql
-- –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
JOIN mcl.postgres_tables pt ON pi.table_id = pt.id

-- –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):
JOIN mcl.postgres_index_columns pic ON pi.id = pic.index_id
JOIN mcl.postgres_columns pc ON pic.column_id = pc.id
JOIN mcl.postgres_tables pt ON pc.table_id = pt.id
```

### **4. Foreign Keys (test_migration_v2.py):**
```sql
-- –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
AND mt.id NOT IN (
    SELECT DISTINCT table_id 
    FROM mcl.mssql_foreign_keys
)

-- –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):
AND mt.id NOT IN (
    SELECT DISTINCT mt2.id
    FROM mcl.mssql_foreign_keys mfk
    JOIN mcl.mssql_tables mt2 ON mfk.table_id = mt2.id
    WHERE mt2.task_id = %s
)
```

---

## üéØ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –î–ê–õ–¨–ù–ï–ô–®–ò–ú –î–ï–ô–°–¢–í–ò–Ø–ú**

### **1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 - Check Constraints:**
- **–ó–∞–¥–∞—á–∞**: –ú–∞–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ 31 check constraint
- **–°—Ç–∞—Ç—É—Å**: 0% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è check constraints

### **2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞:**
- **–ó–∞–¥–∞—á–∞**: –û–±–Ω–æ–≤–∏—Ç—å migration_functions.py —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã, –≥–æ—Ç–æ–≤—ã –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ JOIN –æ–ø–µ—Ä–∞—Ü–∏–∏

### **3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- **–ó–∞–¥–∞—á–∞**: –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞

---

## üèÜ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

### **‚úÖ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø:**

1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º
2. **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
3. **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è**: –í—Å–µ 11 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–ó–∞–ø—Ä–æ—Å—ã**: –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### **üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò:**

| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç** | **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** | **–°—Ç–∞—Ç—É—Å** |
|---------------|----------------|------------|
| **–¢–∞–±–ª–∏—Ü—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** | **100%** | ‚úÖ **–ì–û–¢–û–í–û** |
| **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** | **100%** | ‚úÖ **–ì–û–¢–û–í–û** |
| **–ó–∞–ø—Ä–æ—Å—ã —Ñ—É–Ω–∫—Ü–∏–π** | **100%** | ‚úÖ **–ì–û–¢–û–í–û** |
| **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** | **100%** | ‚úÖ **–ì–û–¢–û–í–û** |
| **–ú–∞–ø–ø–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π** | **66%** | ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û** |

### **üéØ –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê: 93% –ì–û–¢–û–í–ù–û–°–¢–ò**

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π!** 

**–û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è check constraints (34% –æ—Ç –æ–±—â–µ–≥–æ –æ–±—ä–µ–º–∞) –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.**

---

## üöÄ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å migration_functions.py** —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
2. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å test_migration_v2.py** —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
3. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π** –¥–ª—è check constraints
4. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
5. ‚úÖ **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –Ω–∞ 100% –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üéâ**