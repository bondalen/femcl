# üìã –ú–∏–≥—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–∞–ø–∞ 1.2 "–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö" —Å–∏—Å—Ç–µ–º—ã FEMCL.

---

## üìñ –û–±–∑–æ—Ä

### –ö–æ–Ω—Ç–µ–∫—Å—Ç
- **–≠—Ç–∞–ø:** 1.2 - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
- **–ó–∞–¥–∞—á–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:** ID=2
- **–û–±–ª–∞—Å—Ç—å:** –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- **–¶–µ–ª—å:** –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

### –ü—Ä–∏–Ω—Ü–∏–ø—ã
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π
- **–ü–æ–ª–Ω–æ—Ç–∞:** –ö–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –¥–∞–Ω–Ω—ã–µ)
- **–ö–æ–Ω—Ç—Ä–æ–ª—å:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –≤ —Å—Ö–µ–º–µ mcl

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–ª–∞—Å—Å—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### TableMigrator
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã:
- **–§–∞–π–ª:** `src/classes/table_migrator.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã
- **–ú–µ—Ç–æ–¥—ã:**
  - `get_table_metadata()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã
  - `create_target_table()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
  - `create_indexes()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
  - `create_foreign_keys()` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
  - `create_constraints()` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
  - `create_triggers()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
  - `migrate_table_data()` - –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
  - `validate_migration()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

#### TableModel (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π)
–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã:
- **–§–∞–π–ª:** `src/classes/table_model.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –º–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ã
- **–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥:** `create_table_model()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –º–æ–¥–µ–ª–∏
- **–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
  - `generate_table_ddl()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è DDL –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
  - `generate_indexes_ddl()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è DDL –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤
  - `migrate_data()` - –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### RegularTableModel
–ú–æ–¥–µ–ª—å –æ–±—ã—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
- **–§–∞–π–ª:** `src/classes/regular_table_model.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ü—Ä—è–º–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

#### BaseTableModel
–ú–æ–¥–µ–ª—å –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏:
- **–§–∞–π–ª:** `src/classes/base_table_model.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —Ç–∞–±–ª–∏—Ü —Å –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã + –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - `target_base_table_name` - –∏–º—è –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
  - `view_reference` - —Å—Å—ã–ª–∫–∞ –Ω–∞ ViewModel

#### ViewModel
–ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
- **–§–∞–π–ª:** `src/classes/view_model.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º —Å –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - `view_name` - –∏–º—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
  - `base_table_name` - –∏–º—è –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
  - `computed_columns` - —Å–ø–∏—Å–æ–∫ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
  - `base_table_model` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –±–∞–∑–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É

#### ComputedColumnModel
–ú–æ–¥–µ–ª—å –≤—ã—á–∏—Å–ª—è–µ–º–æ–π –∫–æ–ª–æ–Ω–∫–∏:
- **–§–∞–π–ª:** `src/classes/computed_column_model.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤—ã—á–∏—Å–ª—è–µ–º–æ–π –∫–æ–ª–æ–Ω–∫–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - `name` - –∏–º—è –∫–æ–ª–æ–Ω–∫–∏
  - `source_expression` - –∏—Å—Ö–æ–¥–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
  - `target_expression` - —Ü–µ–ª–µ–≤–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
  - `function_mapping` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–∏

#### FunctionMappingState
–°–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–∏:
- **–§–∞–π–ª:** `src/classes/function_mapping_state.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - `status` - —Å—Ç–∞—Ç—É—Å –º–∞–ø–ø–∏–Ω–≥–∞
  - `complexity` - —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏—è
  - `functions` - —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
  - `function_mapping_model` - –º–æ–¥–µ–ª—å –º–∞–ø–ø–∏–Ω–≥–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - `requires_manual_review` - —Ç—Ä–µ–±—É–µ—Ç –ª–∏ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ç–æ—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
migrator = TableMigrator(table_name="accnt", verbose=True)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
metadata = migrator.get_table_metadata()
```

### 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ç–∞–±–ª–∏—Ü—ã
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
has_computed_columns = migrator._check_has_computed_columns()

# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥
table_model = TableModel.create_table_model(table_name, has_computed_columns)
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
```python
# –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã
success = table_model.load_metadata(config_loader)

# –î–ª—è BaseTableModel –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ViewModel
if isinstance(table_model, BaseTableModel):
    table_model.view_reference.load_computed_columns(config_loader)
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
```python
# –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
migrator.create_target_table()

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
migrator.create_indexes()

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
migrator.create_constraints()

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
migrator.create_triggers()
```

### 5. –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
```python
# –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã
migrator.migrate_table_data()
```

### 6. –í–∞–ª–∏–¥–∞—Ü–∏—è
```python
# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
migrator.validate_migration()
```

---

## üìä –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

#### MS SQL Server (–∏—Å—Ö–æ–¥–Ω–∞—è –ë–î)
- **–¢–∞–±–ª–∏—Ü—ã:** `mcl.mssql_tables`
- **–ö–æ–ª–æ–Ω–∫–∏:** `mcl.mssql_columns`
- **–ò–Ω–¥–µ–∫—Å—ã:** `mcl.mssql_indexes`
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** `mcl.mssql_*_constraints`

#### PostgreSQL (—Ü–µ–ª–µ–≤–∞—è –ë–î)
- **–¢–∞–±–ª–∏—Ü—ã:** `mcl.postgres_tables`
- **–ö–æ–ª–æ–Ω–∫–∏:** `mcl.postgres_columns`
- **–ò–Ω–¥–µ–∫—Å—ã:** `mcl.postgres_indexes`
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** `mcl.postgres_*_constraints`

#### –ü—Ä–∞–≤–∏–ª–∞ –º–∞–ø–ø–∏–Ω–≥–∞
- **–§—É–Ω–∫—Ü–∏–∏:** `mcl.function_mapping_rules`
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** `mcl.mssql_derived_types`, `mcl.postgres_derived_types`

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è

#### mcl.postgres_tables
- `object_name` - –∏–º—è —Ü–µ–ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
- `base_table_name` - –∏–º—è –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã (–¥–ª—è —Ç–∞–±–ª–∏—Ü —Å –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏)
- `view_name` - –∏–º—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–¥–ª—è —Ç–∞–±–ª–∏—Ü —Å –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏)
- `has_computed_columns` - —Ñ–ª–∞–≥ –Ω–∞–ª–∏—á–∏—è –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫

#### mcl.postgres_columns
- `column_name` - –∏–º—è —Ü–µ–ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏
- `is_computed` - —Ñ–ª–∞–≥ –≤—ã—á–∏—Å–ª—è–µ–º–æ–π –∫–æ–ª–æ–Ω–∫–∏
- `target_type` - —Ç–∏–ø –∫–æ–ª–æ–Ω–∫–∏ ('both', 'view')
- `computed_definition` - –∏—Å—Ö–æ–¥–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- `postgres_computed_definition` - —Ü–µ–ª–µ–≤–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

---

## üéØ –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏

### –ü—Ä–∏–Ω—Ü–∏–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏
PostgreSQL –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞–ø—Ä—è–º—É—é, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞:
1. **–ë–∞–∑–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É** - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏
2. **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** - —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏, –≤–∫–ª—é—á–∞—è –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è
1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å –±–∞–∑–æ–≤—ã–º–∏ + –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
3. –ú–∞–ø–ø–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π –≤ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö

### –ú–∞–ø–ø–∏–Ω–≥ —Ñ—É–Ω–∫—Ü–∏–π
```python
# –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
function_state = computed_col.analyze_function_state(config_loader)

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞
if function_state.function_mapping_model:
    success = computed_col.map_function()
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config.yaml
```yaml
databases:
  mssql:
    host: "source-server"
    database: "Fish_Eye"
    # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  
  postgres:
    host: "target-server"
    database: "fish_eye_mcl"
    # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

migration:
  task_id: 2
  verbose: true
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
from config.config_loader import ConfigLoader

config_loader = ConfigLoader()
mssql_config = config_loader.get_database_config('mssql')
postgres_config = config_loader.get_database_config('postgres')
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è –æ–±—ã—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ç–æ—Ä–∞
migrator = TableMigrator("accnt", verbose=True)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
metadata = migrator.get_table_metadata()
table_model = metadata['table_model']

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ç–∞–±–ª–∏—Ü—ã
if isinstance(table_model, RegularTableModel):
    print(f"–û–±—ã—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: {table_model.target_table_name}")
    
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
migrator.create_target_table()

# –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
migrator.migrate_table_data()
```

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —Å –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ç–æ—Ä–∞
migrator = TableMigrator("rgTaxIdNumInd", verbose=True)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
metadata = migrator.get_table_metadata()
table_model = metadata['table_model']

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ç–∞–±–ª–∏—Ü—ã
if isinstance(table_model, BaseTableModel):
    print(f"–ë–∞–∑–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: {table_model.target_base_table_name}")
    print(f"–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ: {table_model.view_reference.view_name}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
    for col in table_model.view_reference.computed_columns:
        print(f"–í—ã—á–∏—Å–ª—è–µ–º–∞—è –∫–æ–ª–æ–Ω–∫–∞: {col.name}")
        print(f"–°—Ç–∞—Ç—É—Å –º–∞–ø–ø–∏–Ω–≥–∞: {col.mapping_status}")
        
# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
migrator.create_target_table()  # –°–æ–∑–¥–∞–µ—Ç –∏ —Ç–∞–±–ª–∏—Ü—É, –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
```

---

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã** - –ø—Ä–æ–≤–µ—Ä–∫–∞ `source_exists`
2. **–û—à–∏–±–∫–∏ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π** - —Å—Ç–∞—Ç—É—Å `manual_review_required`
3. **–û—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `mcl.migration_events`
4. **–û—à–∏–±–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
# –°–æ–±—ã—Ç–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
mcl.migration_events

# –°—Ç–∞—Ç—É—Å—ã –º–∏–≥—Ä–∞—Ü–∏–∏
mcl.migration_status

# –ü—Ä–æ–±–ª–µ–º—ã
mcl.problems
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - `migration_duration`
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫** - `source_row_count` vs —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ
- **–°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏** - `migration_status`
- **–û—à–∏–±–∫–∏** - `errors` —Å–ø–∏—Å–æ–∫

### –í–∞–ª–∏–¥–∞—Ü–∏—è
```python
# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
success = migrator.validate_migration()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫
source_count = table_model.source_row_count
target_count = get_target_row_count(table_model.target_table_name)

if source_count != target_count:
    print(f"‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫: {source_count} != {target_count}")
```

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã
1. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
3. **–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ** - —Å–æ–≥–ª–∞—Å–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –æ–±—Ö–æ–¥–∞
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** - –≤ —Å–∏—Å—Ç–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –æ–±—Ö–æ–¥–∞
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
next_table = get_next_table_to_migrate()

# –ú–∏–≥—Ä–∞—Ü–∏—è —Å–ª–µ–¥—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
migrator = TableMigrator(next_table, verbose=True)
# ... –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [MIGRATION_STRATEGY.md](MIGRATION_STRATEGY.md) - –æ–±—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
- [DATABASE_SCHEMA.md](DATABASE_SCHEMA.md) - —Å—Ö–µ–º–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- [FUNCTION_MAPPING_RULES.md](../operations/rules/function_mapping/FUNCTION_MAPPING_RULES.md) - –ø—Ä–∞–≤–∏–ª–∞ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π
- [class_diagram.puml](../diagrams/class_diagram.puml) - –¥–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 3 –æ–∫—Ç—è–±—Ä—è 2025*
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 3 –æ–∫—Ç—è–±—Ä—è 2025*
*–ê–≤—Ç–æ—Ä: AI Assistant*
*–°—Ç–∞—Ç—É—Å: –ê–ö–¢–ò–í–ù–´–ô*

