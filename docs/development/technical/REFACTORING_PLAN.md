# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ ConnectionManager

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-07  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ  
**–¶–µ–ª—å:** –ü–µ—Ä–µ—Ö–æ–¥ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConnectionManager

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å –ø—Ä—è–º—ã–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏:** 22
- **–£–¥–∞–ª–µ–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤:** 40
- **–û—Å—Ç–∞–ª–æ—Å—å –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** 22

---

## üéØ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –ö–∞—Ç–µ–≥–æ—Ä–∏—è A: –ö–†–ò–¢–ò–ß–ù–´–ï - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å ‚≠ê‚≠ê‚≠ê

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|--------|-----------|------------|
| `scripts/check_connections_and_tables.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –í—ã—Å–æ–∫–∏–π | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π ‚Üí ConnectionDiagnostics |
| `scripts/check_mcl_schema.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –í—ã—Å–æ–∫–∏–π | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã mcl ‚Üí ConnectionDiagnostics |
| `scripts/migration_manager.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –û—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏ |
| `scripts/reset_migration_status.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –í—ã—Å–æ–∫–∏–π | –°–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏ |

### –ö–∞—Ç–µ–≥–æ—Ä–∏—è B: –†–ï–§–ï–†–ï–ù–°–ù–´–ï - –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–∏–º–µ—Ä—ã ‚úÖ

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|------|--------|----------|
| `scripts/migrate_cn.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã |
| `scripts/check_cn.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–±–ª–∏—Ü—ã |

### –ö–∞—Ç–µ–≥–æ—Ä–∏—è C: –ú–ò–ì–†–ê–¶–ò–Ø - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã ‚≠ê‚≠ê

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|--------|-----------|
| `scripts/migrate_single_table.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –°—Ä–µ–¥–Ω–∏–π |
| `scripts/migration/full_structure_migration.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –í—ã—Å–æ–∫–∏–π |
| `scripts/migration/dependency_analyzer.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –í—ã—Å–æ–∫–∏–π |
| `scripts/migration/table_list_manager.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –°—Ä–µ–¥–Ω–∏–π |
| `scripts/migration/monitoring_reporter.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –°—Ä–µ–¥–Ω–∏–π |
| `scripts/migration/start_migration.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –í—ã—Å–æ–∫–∏–π |
| `scripts/monitoring/check_status.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –°—Ä–µ–¥–Ω–∏–π |

### –ö–∞—Ç–µ–≥–æ—Ä–∏—è D: –î–ê–ù–ù–´–ï - —Å–∫—Ä–∏–ø—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö ‚≠ê

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|--------|-----------|
| `scripts/migration/extract_mssql_data.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –°—Ä–µ–¥–Ω–∏–π |
| `scripts/migration/load_postgres_data.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –°—Ä–µ–¥–Ω–∏–π |
| `scripts/migration/migrate_accnt_data.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –ù–∏–∑–∫–∏–π |

### –ö–∞—Ç–µ–≥–æ—Ä–∏—è E: –¢–ï–°–¢–û–í–´–ï - —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å ‚ùå

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|------|--------|----------|
| `scripts/migration/real_data_migration.py` | ‚ùå –£–¥–∞–ª–∏—Ç—å | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è |
| `scripts/migration/real_data_migration_fixed.py` | ‚ùå –£–¥–∞–ª–∏—Ç—å | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è |
| `scripts/migration/real_data_migration_final.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| `scripts/migration/test_data_migration.py` | ‚ùå –£–¥–∞–ª–∏—Ç—å | –¢–µ—Å—Ç–æ–≤—ã–π |
| `scripts/migration/test_three_tables_real_migration.py` | ‚ùå –£–¥–∞–ª–∏—Ç—å | –¢–µ—Å—Ç–æ–≤—ã–π |
| `scripts/migration/check_mssql_tables.py` | ‚öôÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü |

---

## üìù –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

1. ‚úÖ `check_connections_and_tables.py` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConnectionDiagnostics
2. ‚úÖ `check_mcl_schema.py` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConnectionDiagnostics
3. ‚úÖ `migration_manager.py` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConnectionManager
4. ‚úÖ `reset_migration_status.py` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConnectionManager

### –≠—Ç–∞–ø 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

5. ‚úÖ `migrate_cn.py` ‚Üí –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ConnectionManager
6. ‚úÖ `check_cn.py` ‚Üí –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ConnectionManager

### –≠—Ç–∞–ø 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–∫—Ä–∏–ø—Ç–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏

7. ‚úÖ `migration/full_structure_migration.py`
8. ‚úÖ `migration/dependency_analyzer.py`
9. ‚úÖ `migration/table_list_manager.py`
10. ‚úÖ `migration/start_migration.py`

### –≠—Ç–∞–ø 4: –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π

11. ‚ùå –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (5 —Ñ–∞–π–ª–æ–≤)

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```python
from src.code.infrastructure.classes import ConnectionManager

manager = ConnectionManager()  # task_id=2 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
pg_conn = manager.get_postgres_connection()
ms_conn = manager.get_mssql_connection()
```

–í–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `psycopg2.connect()` –∏ `pyodbc.connect()`

