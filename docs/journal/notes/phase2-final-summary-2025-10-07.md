# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞: –§–∞–∑–∞ 2 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ë–î (–§–ò–ù–ê–õ–¨–ù–ê–Ø)

**–î–∞—Ç–∞:** 2025-10-07  
**–ß–∞—Ç:** –§—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö  
**–§–∞–∑–∞:** 2 (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ë–î + –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê

---

## ‚úÖ –ß–¢–û –í–´–ü–û–õ–ù–ï–ù–û

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ç–∞–±–ª–∏—Ü —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º

**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞:**
```sql
postgres_function_conversions (11 –ø–æ–ª–µ–π)
‚îú‚îÄ‚îÄ source_definition, target_definition
‚îú‚îÄ‚îÄ mapping_rule_id, mapping_status, mapping_complexity, mapping_notes
‚îú‚îÄ‚îÄ manual_developer, manual_started_at, manual_completed_at
‚îî‚îÄ‚îÄ created_at, updated_at
```

**4 –¥–æ—á–µ—Ä–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (INHERITS):**
```sql
postgres_column_function_conversions (column_id FK)
postgres_default_constraint_function_conversions (constraint_id FK)
postgres_check_constraint_function_conversions (constraint_id FK)
postgres_index_function_conversions (index_id FK + —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ)
```

---

### 2. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –í—Å–µ–≥–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π: **147**
- –í—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∫–æ–ª–æ–Ω–æ–∫: **67**
- DEFAULT –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π: **49**
- CHECK –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π: **31**
- –ò–Ω–¥–µ–∫—Å–æ–≤: **0**

**–°—Ç–∞—Ç—É—Å—ã:**
- automatic-mapped: **90** (61%)
- pending: **57** (39%)

---

### 3. ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º postgres_

**–ë—ã–ª–æ ‚Üí –°—Ç–∞–ª–æ:**
```
function_conversions 
  ‚Üí postgres_function_conversions

column_function_conversions 
  ‚Üí postgres_column_function_conversions

default_constraint_function_conversions 
  ‚Üí postgres_default_constraint_function_conversions

check_constraint_function_conversions 
  ‚Üí postgres_check_constraint_function_conversions

index_function_conversions 
  ‚Üí postgres_index_function_conversions
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–∞–±–ª–∏—Ü—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π —Ç–µ–ø–µ—Ä—å —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è **–†–Ø–î–û–ú** —Å–æ —Å–≤–æ–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏!

---

### 4. ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ –ë–î (–ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è)

**CHECK CONSTRAINTS:**
```
postgres_check_constraint_columns
postgres_check_constraint_function_conversions  ‚Üê –†–Ø–î–û–ú!
postgres_check_constraints
```

**COLUMNS:**
```
postgres_column_function_conversions  ‚Üê –†–Ø–î–û–ú!
postgres_columns
postgres_columns_backup_...
```

**DEFAULT CONSTRAINTS:**
```
postgres_default_constraint_function_conversions  ‚Üê –†–Ø–î–û–ú!
postgres_default_constraints
postgres_default_constraints_backup_...
```

**INDEXES:**
```
postgres_index_columns
postgres_index_function_conversions  ‚Üê –†–Ø–î–û–ú!
postgres_indexes
```

---

### 5. ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

**v_function_conversions_typed:**
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å —Ç–∏–ø–æ–º –æ–±—ä–µ–∫—Ç–∞
- –°–≤—è–∑—å —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –º–∞–ø–ø–∏–Ω–≥–∞

**v_function_conversions_full:**
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è—Ö
- –ò–º–µ–Ω–∞ –æ–±—ä–µ–∫—Ç–æ–≤ (object_full_name)
- task_id (–¥–ª—è –∫–æ–ª–æ–Ω–æ–∫ –∏ –∏–Ω–¥–µ–∫—Å–æ–≤)

---

### 6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

**–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:**
```
‚úÖ postgres_column_function_conversions INHERITS FROM postgres_function_conversions
‚úÖ postgres_default_constraint_function_conversions INHERITS FROM postgres_function_conversions
‚úÖ postgres_check_constraint_function_conversions INHERITS FROM postgres_function_conversions
‚úÖ postgres_index_function_conversions INHERITS FROM postgres_function_conversions
```

**–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å FK:**
```
‚úÖ –ö–æ–ª–æ–Ω–∫–∏: 67 –∑–∞–ø–∏—Å–µ–π = 67 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö FK
‚úÖ DEFAULT: 49 –∑–∞–ø–∏—Å–µ–π = 49 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö FK
‚úÖ CHECK: 31 –∑–∞–ø–∏—Å—å = 31 —É–Ω–∏–∫–∞–ª—å–Ω—ã–π FK
```

**–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:**
```
‚úÖ –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è: 147 –∑–∞–ø–∏—Å–µ–π
‚úÖ –°—É–º–º–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö: 147 –∑–∞–ø–∏—Å–µ–π
‚úÖ –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å: OK
```

---

### 7. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–§–∞–π–ª—ã:**
- `docs/project/project-docs.json` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü
- `database/sql/function_conversions/README.md` - –≥–æ—Ç–æ–≤ –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é

---

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´ (–§–∞–∑–∞ 2)

### SQL —Å–∫—Ä–∏–ø—Ç—ã:
1. `01_create_parent_table.sql` (95 —Å—Ç—Ä–æ–∫) - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞
2. `02_create_child_tables.sql` (120 —Å—Ç—Ä–æ–∫) - 4 –¥–æ—á–µ—Ä–Ω–∏–µ
3. `03_migrate_existing_data.sql` (126 —Å—Ç—Ä–æ–∫) - –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
4. `04_create_views.sql` (136 —Å—Ç—Ä–æ–∫) - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
5. `05_rename_tables.sql` (120 —Å—Ç—Ä–æ–∫) - –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å psql
6. `05_rename_tables_clean.sql` (70 —Å—Ç—Ä–æ–∫) - —á–∏—Å—Ç—ã–π SQL
7. `06_recreate_views.sql` (127 —Å—Ç—Ä–æ–∫) - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
8. `07_rename_fk_constraints.sql` (49 —Å—Ç—Ä–æ–∫) - FK constraints
9. `00_run_all.sql` (57 —Å—Ç—Ä–æ–∫) - –º–∞—Å—Ç–µ—Ä-—Å–∫—Ä–∏–ø—Ç
10. `README.md` (92 —Å—Ç—Ä–æ–∫–∏) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Python —Å–∫—Ä–∏–ø—Ç—ã:
11. `execute_all.py` (112 —Å—Ç—Ä–æ–∫) - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
12. `execute_rename.py` (126 —Å—Ç—Ä–æ–∫) - –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
13. `finish_rename.py` (98 —Å—Ç—Ä–æ–∫) - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

**–ò—Ç–æ–≥–æ:** 13 —Ñ–∞–π–ª–æ–≤, ~1,428 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –°–æ–∑–¥–∞–Ω–æ –≤ –ë–î:
- 5 —Ç–∞–±–ª–∏—Ü (1 —Ä–æ–¥–∏—Ç–µ–ª—å + 4 –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞)
- 2 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- 15+ –∏–Ω–¥–µ–∫—Å–æ–≤
- 10+ constraints
- 147 –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

### –ò–∑–º–µ–Ω–µ–Ω–æ:
- 5 —Ç–∞–±–ª–∏—Ü –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã
- 15+ –∏–Ω–¥–µ–∫—Å–æ–≤ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã
- 10+ constraints –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- 2 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:
- ‚úÖ –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ FK –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –§–ê–ó–´ 2

**–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û:**

1. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î —Å–æ–∑–¥–∞–Ω–∞** ‚úÖ
   - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º
   - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ FK
   - –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

2. **–î–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã** ‚úÖ
   - 147 –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
   - –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞
   - –°—Ç–∞—Ç—É—Å—ã –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã

3. **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚úÖ
   - –ü—Ä–µ—Ñ–∏–∫—Å postgres_ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

4. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã** ‚úÖ
   - –í—Å–µ —Ç–µ—Å—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
   - –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –§–∞–∑–∞ 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤ Python (~5h)

**–ö–ª–∞—Å—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```python
FunctionConverter (src/code/metadata/classes/)
‚îú‚îÄ‚îÄ convert_automatic()
‚îú‚îÄ‚îÄ identify_manual_functions()
‚îú‚îÄ‚îÄ start_manual()
‚îú‚îÄ‚îÄ complete_manual()
‚îî‚îÄ‚îÄ _apply_rules()

MetadataTransformer (src/code/metadata/classes/)
‚îú‚îÄ‚îÄ transform_all()
‚îú‚îÄ‚îÄ transform_functions()
‚îî‚îÄ‚îÄ validate_all_functions()
```

### –§–∞–∑–∞ 4: –†—É—á–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π (~8h)

**–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã:**
- 25 –∫–æ–ª–æ–Ω–æ–∫ –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`
  - 13 –∫–∞—Å—Ç–æ–º–Ω—ã—Ö [ags]
  - 12 —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

---

**–§–∞–∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:** 2025-10-07  
**–í—Ä–µ–º—è:** ~2h  
**–ê–≤—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ FEMCL  
**–°–ª–µ–¥—É—é—â–∞—è —Ñ–∞–∑–∞:** –§–∞–∑–∞ 3 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤ Python

