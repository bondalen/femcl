# üèóÔ∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏–Ω–¥–µ–∫—Å–æ–≤

**–î–∞—Ç–∞:** 2025-10-02  
**–ü—Ä–æ–µ–∫—Ç:** FEMCL  
**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º—ã—Ö —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏  

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### 1. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
- **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä—è–º—ã—Ö —Å–≤—è–∑–µ–π –º–µ–∂–¥—É `postgres_indexes` –∏ `postgres_tables`
- **–°–ª–µ–¥—Å—Ç–≤–∏–µ:** –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ 4-5 —Ç–∞–±–ª–∏—Ü –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç–∞–±–ª–∏—Ü—ã
- **–í–ª–∏—è–Ω–∏–µ:** –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ table_id
- ‚úÖ **mssql_indexes**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `table_id INTEGER`
- ‚úÖ **postgres_indexes**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `table_id INTEGER`
- ‚úÖ **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏**: –°–æ–∑–¥–∞–Ω—ã FK –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ **–ò–Ω–¥–µ–∫—Å—ã**: –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 3. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **mssql_indexes**: 150/150 –∑–∞–ø–∏—Å–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω—ã table_id
- ‚úÖ **postgres_indexes**: 150/150 –∑–∞–ø–∏—Å–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω—ã table_id
- ‚úÖ **–°–≤—è–∑–∏**: –í—Å–µ —Å–≤—è–∑–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –∏—Å—Ö–æ–¥–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **Source ID**: –í—Å–µ —Å–≤—è–∑–∏ source_index_id –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ **Table ID**: –í—Å–µ —Å–≤—è–∑–∏ table_id —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã accnt

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:

#### –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (—Å–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å):
```sql
SELECT pi.* FROM mcl.postgres_indexes pi
WHERE pi.source_index_id IN (
    SELECT mi.id FROM mcl.mssql_indexes mi
    JOIN mcl.mssql_index_columns mic ON mi.id = mic.index_id
    JOIN mcl.mssql_columns mc ON mic.column_id = mc.id
    JOIN mcl.mssql_tables mt ON mc.table_id = mt.id
    WHERE mt.object_name = 'accnt'
)
```
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~4.67 –º—Å
- **JOIN –æ–ø–µ—Ä–∞—Ü–∏–π:** 4-5
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è

#### –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (–ø—Ä—è–º—ã–µ —Å–≤—è–∑–∏):
```sql
SELECT pi.* FROM mcl.postgres_indexes pi
JOIN mcl.postgres_tables pt ON pi.table_id = pt.id
WHERE pt.object_name = 'accnt'
```
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~0.69 –º—Å
- **JOIN –æ–ø–µ—Ä–∞—Ü–∏–π:** 1
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è

### üöÄ –£–ª—É—á—à–µ–Ω–∏—è:
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** +85.3% (–≤ 6.8 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ)
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞:** –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–º–µ–Ω–µ–Ω—ã –ø—Ä–æ—Å—Ç—ã–º–∏
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –ü—Ä—è–º—ã–µ —Å–≤—è–∑–∏ –æ—á–µ–≤–∏–¥–Ω—ã
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –õ–µ–≥—á–µ –ø–æ–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–≤—è–∑–µ–π:
```
–î–û:
mcl.postgres_indexes (–ù–ï–¢ –ø—Ä—è–º–æ–π —Å–≤—è–∑–∏)
    ‚Üì (—á–µ—Ä–µ–∑ source_index_id)
mcl.mssql_indexes 
    ‚Üì (—á–µ—Ä–µ–∑ mssql_index_columns)
mcl.mssql_columns 
    ‚Üì (—á–µ—Ä–µ–∑ table_id)
mcl.mssql_tables

–ü–û–°–õ–ï:
mcl.postgres_indexes (table_id) ‚Üí mcl.postgres_tables (id)
mcl.mssql_indexes (table_id) ‚Üí mcl.mssql_tables (id)
```

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:
- **–ö–æ–ª–æ–Ω–∫–∏:** `table_id` –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏:** `fk_mssql_indexes_table_id`, `fk_postgres_indexes_table_id`
- **–ò–Ω–¥–µ–∫—Å—ã:** `idx_mssql_indexes_table_id`, `idx_postgres_indexes_table_id`

### –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
```sql
-- MS SQL –∏–Ω–¥–µ–∫—Å—ã
UPDATE mcl.mssql_indexes 
SET table_id = (
    SELECT DISTINCT mt.id 
    FROM mcl.mssql_tables mt
    JOIN mcl.mssql_columns mc ON mt.id = mc.table_id
    JOIN mcl.mssql_index_columns mic ON mc.id = mic.column_id
    WHERE mic.index_id = mssql_indexes.id
    LIMIT 1
)

-- PostgreSQL –∏–Ω–¥–µ–∫—Å—ã
UPDATE mcl.postgres_indexes 
SET table_id = (
    SELECT DISTINCT pt.id 
    FROM mcl.postgres_tables pt
    JOIN mcl.mssql_tables mt ON pt.source_table_id = mt.id
    JOIN mcl.mssql_columns mc ON mt.id = mc.table_id
    JOIN mcl.mssql_index_columns mic ON mc.id = mic.column_id
    JOIN mcl.mssql_indexes mi ON mic.index_id = mi.id
    WHERE mi.id = postgres_indexes.source_index_id
    LIMIT 1
)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã accnt:
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤:** 1 –∏–Ω–¥–µ–∫—Å –Ω–∞–π–¥–µ–Ω –∏ –∑–∞–≥—Ä—É–∂–µ–Ω
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 85.3% —É–ª—É—á—à–µ–Ω–∏–µ
- ‚úÖ **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:** –í—Å–µ —Å–≤—è–∑–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:** Source ID –∏ Table ID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–µ–π:
```
MS SQL: PK_accnt (ID: 1, table_id: 1508)
PG: pk_accnt (ID: 81, table_id: 302, source: 1)
–°–≤—è–∑—å: MS SQL table_id 1508 = PG source_table_id 1508 ‚úÖ
```

## üìà –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ó–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ 6.8 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
2. **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ü—Ä—è–º—ã–µ —Å–≤—è–∑–∏ –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö JOIN
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
4. **–û—Ç–ª–∞–¥–∫–∞:** –ü—Ä–æ—â–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–ª–∞ –ø–æ–Ω—è—Ç–Ω–µ–µ

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥:** –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ **source_index_id:** –°–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:** –ó–∞–º–µ–Ω–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ —Å–≤—è–∑–∏ –≤–µ–∑–¥–µ
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:** –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü—Ä–∏–º–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞:
```python
# –°—Ç–∞—Ä—ã–π –∫–æ–¥
cursor.execute("""
    SELECT pi.* FROM mcl.postgres_indexes pi
    WHERE pi.source_index_id IN (
        SELECT mi.id FROM mcl.mssql_indexes mi
        JOIN mcl.mssql_index_columns mic ON mi.id = mic.index_id
        JOIN mcl.mssql_columns mc ON mic.column_id = mc.id
        JOIN mcl.mssql_tables mt ON mc.table_id = mt.id
        WHERE mt.object_name = %s
    )
""", (table_name,))

# –ù–æ–≤—ã–π –∫–æ–¥
cursor.execute("""
    SELECT pi.* FROM mcl.postgres_indexes pi
    JOIN mcl.postgres_tables pt ON pi.table_id = pt.id
    WHERE pt.object_name = %s
""", (table_name,))
```

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ —É—Å–ø–µ—à–Ω–æ —É–ª—É—á—à–µ–Ω–∞! –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º—ã—Ö —Å–≤—è–∑–µ–π `table_id` —Ä–µ—à–∏–ª–æ –ø—Ä–æ–±–ª–µ–º—É —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏–ª–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã. –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- üöÄ **85.3% —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- üîó **–ü—Ä—è–º—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏**
- ‚úÖ **100% —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
- üõ†Ô∏è **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏**

–°–∏—Å—Ç–µ–º–∞ FEMCL —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏! üéØ