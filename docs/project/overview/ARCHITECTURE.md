# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ FEMCL

**–î–∞—Ç–∞:** 27 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞  
**–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–º—ã—Å–µ–ª:** [PROJECT_CONCEPT.md](./PROJECT_CONCEPT.md)

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üìä –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø–æ–¥—Ö–æ–¥
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏:

1. **–≠—Ç–∞–ø 1:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
2. **–≠—Ç–∞–ø 2:** –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ë–î

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Å–º. –≤ [PROJECT_CONCEPT.md](./PROJECT_CONCEPT.md)

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/home/alex/projects/sql/femcl/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ classes/           # –ö–ª–∞—Å—Å—ã —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ table_migrator.py    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ table_model.py        # –ú–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ column_model.py       # –ú–æ–¥–µ–ª—å –∫–æ–ª–æ–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ scripts/           # –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ migrate_table.py      # –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ config_loader.py  # –ó–∞–≥—Ä—É–∑—á–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ reports/          # –û—Ç—á–µ—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

**–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:** [MODULE_ARCHITECTURE.md](../architecture/MODULE_ARCHITECTURE.md)

## üîß –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

### TableModel
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ–π —Ç–∞–±–ª–∏—Ü—ã (–≠—Ç–∞–ø 1.1 - —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- **–ú–µ—Ç–æ–¥—ã:**
  - ‚úÖ `load_columns()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ –∏–∑ `mcl`
  - ‚ùå `load_indexes()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)
  - ‚ùå `load_foreign_keys()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)
  - ‚ùå `load_constraints()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)
  - ‚ùå `load_triggers()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)

### TableMigrator
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã (–≠—Ç–∞–ø 1.2 - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- **–ú–µ—Ç–æ–¥—ã:**
  - ‚úÖ `create_target_table()` - —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É
  - ‚úÖ `migrate_table_data()` - –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ
  - ‚ùå `create_indexes()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)
  - ‚ùå `create_constraints()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)
  - ‚ùå `create_triggers()` - –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–≠—Ç–∞–ø 1.2)

### ColumnModel
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥–µ–ª—å –∫–æ–ª–æ–Ω–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- **–°–≤–æ–π—Å—Ç–≤–∞:**
  - `name` - —Ü–µ–ª–µ–≤–æ–µ –∏–º—è (PostgreSQL)
  - `source_name` - –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–º—è (MS SQL)
  - `data_type` - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
  - `is_identity` - —è–≤–ª—è–µ—Ç—Å—è –ª–∏ identity –∫–æ–ª–æ–Ω–∫–æ–π

## üìä –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL

### –¢–∞–±–ª–∏—Ü—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
- `mcl.postgres_tables` - —Ç–∞–±–ª–∏—Ü—ã
- `mcl.postgres_columns` - –∫–æ–ª–æ–Ω–∫–∏
- `mcl.postgres_indexes` - –∏–Ω–¥–µ–∫—Å—ã
- `mcl.postgres_foreign_keys` - –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
- `mcl.postgres_unique_constraints` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `mcl.postgres_check_constraints` - –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `mcl.postgres_triggers` - —Ç—Ä–∏–≥–≥–µ—Ä—ã

### –°–≤—è–∑–∏:
- `mcl.mssql_tables` ‚Üî `mcl.postgres_tables` (—á–µ—Ä–µ–∑ `source_table_id`)
- `mcl.mssql_columns` ‚Üî `mcl.postgres_columns` (—á–µ—Ä–µ–∑ `source_column_id`)
- `mcl.mssql_indexes` ‚Üî `mcl.postgres_indexes` (—á–µ—Ä–µ–∑ `source_index_id`)

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏

### –¢–∞–±–ª–∏—Ü–∞ `accnt`:
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∏: 3 —à—Ç. –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ: 16 —Å—Ç—Ä–æ–∫ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã
- ‚ùå –ò–Ω–¥–µ–∫—Å—ã: 3 —à—Ç. –ù–ï –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –ù–ï –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã
- ‚ùå –¢—Ä–∏–≥–≥–µ—Ä—ã: –ù–ï –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã

### –¢–∞–±–ª–∏—Ü–∞ `cn`:
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω (CamelCase ‚Üí snake_case)
- ‚ùå –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

## üîß –¢—Ä–µ–±—É–µ–º—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ TableModel**
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ TableMigrator**
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**
4. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é**

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config.yaml:
```yaml
migration:
  logging:
    level: INFO
  databases:
    mssql:
      host: localhost
      port: 1433
      database: fish_eye_mcl
      user: sa
      password: password
    postgres:
      host: localhost
      port: 5432
      database: femcl
      user: postgres
      password: password
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã:
```bash
python3 src/scripts/migrate_table.py <table_name> [--force] [--verbose]
```

### –ü—Ä–∏–º–µ—Ä:
```bash
python3 src/scripts/migrate_table.py accnt --force --verbose
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **[MODULE_ARCHITECTURE.md](../architecture/MODULE_ARCHITECTURE.md)** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π
- **[SYSTEM_DESIGN.md](../architecture/SYSTEM_DESIGN.md)** - –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### üîß –°–∏—Å—Ç–µ–º–∞ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π
- **[FUNCTION_MAPPING_SYSTEM.md](../migration/FUNCTION_MAPPING_SYSTEM.md)** - –°–∏—Å—Ç–µ–º–∞ –º–∞–ø–ø–∏–Ω–≥–∞ —Ñ—É–Ω–∫—Ü–∏–π MS SQL ‚Üí PostgreSQL

### üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **[ERROR_HANDLING.md](../development/ERROR_HANDLING.md)** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- **[CRITERIA_SUCCESS.md](../development/CRITERIA_SUCCESS.md)** - –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –º–∏–≥—Ä–∞—Ü–∏–∏



