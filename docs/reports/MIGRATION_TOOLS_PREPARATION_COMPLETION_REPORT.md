# –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 2025-01-27  
**–ü—Ä–æ–µ–∫—Ç:** FEMCL (Fish_Eye Migration Control Layer)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  

## üìã –û–±–∑–æ—Ä

–£—Å–ø–µ—à–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ MS SQL Server –≤ PostgreSQL. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ.

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **MS SQL Server:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (localhost:1433, –±–∞–∑–∞ FishEye)
- **PostgreSQL:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (localhost:5432, –±–∞–∑–∞ fish_eye)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `sa` —Å –ø–∞—Ä–æ–ª–µ–º `kolob_OK1`

### ‚úÖ 2. –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

#### `scripts/migration/extract_mssql_data.py`
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ MS SQL Server
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ö–µ–º –∏ —Ç–∞–±–ª–∏—Ü
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CSV —Ñ–æ—Ä–º–∞—Ç
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ JSON

#### `scripts/migration/load_postgres_data.py`
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV –≤ PostgreSQL
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏

#### `scripts/migration/migrate_accnt_data.py`
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ MS SQL Server
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
- –û–±—Ä–∞–±–æ—Ç–∫–∞ identity –∫–æ–ª–æ–Ω–æ–∫ (OVERRIDING SYSTEM VALUE)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

#### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `accnt`:
- **–ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ MS SQL:** 16 —Å—Ç—Ä–æ–∫
- **–ó–∞–≥—Ä—É–∂–µ–Ω–æ –≤ PostgreSQL:** 16 —Å—Ç—Ä–æ–∫
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:** 3 –∫–æ–ª–æ–Ω–∫–∏ (account_key, account_num, account_name)
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** int64, int64, object (string)
- **Identity –∫–æ–ª–æ–Ω–∫–∞:** account_key (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

#### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:
```
account_key | account_num | account_name
16         | 601300      | –†–∞—Å—á–µ—Ç—ã –ø–æ –∞—Ä–µ–Ω–¥–Ω–æ–π –ø–ª–∞—Ç–µ –∑–∞ –∑–µ–º–ª—é –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º...
17         | 601750      | –†–∞—Å—á–µ—Ç—ã –ø–æ –∞–≤–∞–Ω—Å–∞–º –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º –∞—Ä–µ–Ω–¥—ã –∑–µ–º–µ–ª—å–Ω—ã—Ö...
18         | 601760      | –†–∞—Å—á–µ—Ç—ã –ø–æ –∞–≤–∞–Ω—Å–∞–º –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º –∞—Ä–µ–Ω–¥—ã –∑–µ–º–µ–ª—å–Ω—ã—Ö...
19         | 606012      | –†–∞—Å—á–µ—Ç—ã –ø–æ –∞–≤–∞–Ω—Å–∞–º, –≤—ã–¥–∞–Ω–Ω—ã–º –ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º –∑–∞...
20         | 606014      | –†–∞—Å—á–µ—Ç—ã —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º–∏ –∑–µ–º–µ–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤...
```

### ‚úÖ 4. –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã –∏–∑ PostgreSQL
- –¢–∞–±–ª–∏—Ü–∞ `ags.accnt` –æ—á–∏—â–µ–Ω–∞
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö:
- **MS SQL Server:** `localhost:1433/FishEye` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: sa)
- **PostgreSQL:** `localhost:5432/fish_eye` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: postgres)

### –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è MS SQL:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å `Fish_Eye` –Ω–∞ `FishEye`
3. **Identity –∫–æ–ª–æ–Ω–∫–∏:** –î–æ–±–∞–≤–ª–µ–Ω `OVERRIDING SYSTEM VALUE` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏
4. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `scripts/migration/extract_mssql_data.py` (210 —Å—Ç—Ä–æ–∫)
- `scripts/migration/load_postgres_data.py` (261 —Å—Ç—Ä–æ–∫–∞)
- `scripts/migration/migrate_accnt_data.py` (257 —Å—Ç—Ä–æ–∫)
- –û–±–Ω–æ–≤–ª–µ–Ω `.env` —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ MS SQL Server

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ò–∑–≤–ª–µ—á–µ–Ω–æ —Å—Ç—Ä–æ–∫ | 16 |
| –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Å—Ç—Ä–æ–∫ | 16 |
| –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | < 5 —Å–µ–∫—É–Ω–¥ |
| –û—à–∏–±–æ–∫ | 0 |
| –£—Å–ø–µ—à–Ω–æ—Å—Ç—å | 100% |

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω

### ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- [x] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
- [x] –°–∫—Ä–∏–ø—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- [x] –°–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- [x] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –º–∏–≥—Ä–∞—Ü–∏–∏
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ identity –∫–æ–ª–æ–Ω–æ–∫
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [x] –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã—Ö:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `migrate_accnt_data.py`
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–∏
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –æ –º–∏–≥—Ä–∞—Ü–∏–∏

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã `accnt` –∏–∑ MS SQL Server –≤ PostgreSQL.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ù –ú–ò–ì–†–ê–¶–ò–ò