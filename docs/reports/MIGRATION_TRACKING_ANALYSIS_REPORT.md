# üìä –û–¢–ß–ï–¢ –û –í–û–ó–ú–û–ñ–ù–û–°–¢–Ø–• –£–ß–ï–¢–ê –•–û–î–ê –ú–ò–ì–†–ê–¶–ò–ò –í –°–•–ï–ú–ï MCL

## üìã –°—Ç–∞—Ç—É—Å –∞–Ω–∞–ª–∏–∑–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–ó–∞–¥–∞—á–∞:** –ê–Ω–∞–ª–∏–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —É—á–µ—Ç–∞ —Ö–æ–¥–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ —Å—Ö–µ–º–µ mcl  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### ‚úÖ –°—Ö–µ–º–∞ MCL - –ì–û–¢–û–í–ê –ö –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Æ

**–°—Ö–µ–º–∞ mcl —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:**

#### üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
1. **`migration_tasks`** - –∑–∞–¥–∞—á–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (2 –∑–∞–¥–∞—á–∏)
2. **`mssql_tables`** - –∏—Å—Ö–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (167 —Ç–∞–±–ª–∏—Ü)
3. **`postgres_tables`** - —Ü–µ–ª–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (166 —Ç–∞–±–ª–∏—Ü)
4. **`migration_log`** - –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ –≤ —Å—Ö–µ–º–µ mcl

#### üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤ mcl:

**‚úÖ –ü–æ–ª–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:**
- **–°—Ç–∞—Ç—É—Å—ã –º–∏–≥—Ä–∞—Ü–∏–∏** - –∫–æ–ª–æ–Ω–∫–∞ `migration_status` –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
- **–°–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü** - –∫–æ–ª–æ–Ω–∫–∞ `source_table_id` –≤ `postgres_tables`
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** - `migration_date`, `created_at`, `updated_at`
- **–û—à–∏–±–∫–∏** - –∫–æ–ª–æ–Ω–∫–∞ `error_message`
- **–ú–µ—Ç—Ä–∏–∫–∏** - `row_count`, `table_size`, `migration_duration`

### ‚ùå –°—Ö–µ–º–∞ AGS - –ò–ó–ë–´–¢–û–ß–ù–ê–Ø

**–¢–∞–±–ª–∏—Ü–∞ `migration_log` –≤ —Å—Ö–µ–º–µ ags —è–≤–ª—è–µ—Ç—Å—è –∏–∑–±—ã—Ç–æ—á–Ω–æ–π:**

#### üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ags.migration_log:
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** 8 –∫–æ–ª–æ–Ω–æ–∫ (id, table_name, migration_status, started_at, completed_at, rows_migrated, error_message, created_at)
- **–î–∞–Ω–Ω—ã–µ:** 0 –∑–∞–ø–∏—Å–µ–π (–ø—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î—É–±–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã mcl

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –°–•–ï–ú–£ MCL –î–õ–Ø –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø

**–°—Ö–µ–º–∞ mcl –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

#### üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ mssql_tables:
```sql
-- –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
SELECT migration_status, COUNT(*) 
FROM mcl.mssql_tables 
GROUP BY migration_status;

-- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∑–∞–¥–∞—á–∞–º
SELECT task_id, migration_status, COUNT(*) 
FROM mcl.mssql_tables 
GROUP BY task_id, migration_status;
```

#### üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ postgres_tables:
```sql
-- –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ —Ü–µ–ª–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
SELECT migration_status, COUNT(*) 
FROM mcl.postgres_tables 
GROUP BY migration_status;

-- –°–≤—è–∑–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö –∏ —Ü–µ–ª–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
SELECT 
    mt.object_name as source_table,
    pt.object_name as target_table,
    mt.migration_status as source_status,
    pt.migration_status as target_status
FROM mcl.mssql_tables mt
LEFT JOIN mcl.postgres_tables pt ON mt.id = pt.source_table_id;
```

### ‚ùå –£–î–ê–õ–ò–¢–¨ MIGRATION_LOG –ò–ó –°–•–ï–ú–´ AGS

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è:**

#### üéØ –ü—Ä–∏—á–∏–Ω—ã —É–¥–∞–ª–µ–Ω–∏—è:
1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** - mcl —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å** - ags –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ü–µ–ª–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü, –Ω–µ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞** - 0 –∑–∞–ø–∏—Å–µ–π, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
4. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —á–∏—Å—Ç–æ—Ç–∞** - mcl –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, ags –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

#### üõ†Ô∏è –ü–ª–∞–Ω —É–¥–∞–ª–µ–Ω–∏—è:
1. **–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. **–£–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É** `ags.migration_log`
3. **–£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** `ags.migration_log_id_seq`
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥

## üöÄ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø MCL

### ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ö–µ–º–µ mcl
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –∏—Å—Ö–æ–¥–Ω—ã–µ –∏ —Ü–µ–ª–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–∞–Ω—ã
- **–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã

### ‚úÖ –ë–æ–≥–∞—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Ä–∞–∑–º–µ—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∑–∞–¥–∞—á–∞–º** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ task_id
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - migration_duration, data_transfer_size

### ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
```sql
-- –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏
SELECT 
    '–ò—Å—Ö–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã' as type,
    migration_status,
    COUNT(*) as count
FROM mcl.mssql_tables
GROUP BY migration_status
UNION ALL
SELECT 
    '–¶–µ–ª–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã' as type,
    migration_status,
    COUNT(*) as count
FROM mcl.postgres_tables
GROUP BY migration_status;

-- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∑–∞–¥–∞—á–∞–º
SELECT 
    t.id as task_id,
    t.description,
    mt.migration_status,
    COUNT(mt.id) as table_count
FROM mcl.migration_tasks t
LEFT JOIN mcl.mssql_tables mt ON t.id = mt.task_id
GROUP BY t.id, t.description, mt.migration_status
ORDER BY t.id, mt.migration_status;
```

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### 1. ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ mcl
- **–°—Ö–µ–º–∞ mcl –≥–æ—Ç–æ–≤–∞** –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
- **–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ** —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã
- **–ë–æ–≥–∞—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### 2. ‚ùå –£–¥–∞–ª–∏—Ç—å ags.migration_log
- **–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- **–£–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É** –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
- **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**

### 3. üöÄ –ù–∞—á–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mcl** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã** —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** —á–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°—Ö–µ–º–∞ mcl –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏!**

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 100%
- **–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã** —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- **–ë–æ–≥–∞—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- **–ì–æ—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### ‚ùå ags.migration_log –∏–∑–±—ã—Ç–æ—á–Ω–∞
- **–î—É–±–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** mcl
- **–ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞** –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫ —É–¥–∞–ª–µ–Ω–∏—é**

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ö–µ–º—É mcl –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —É–¥–∞–ª–∏—Ç—å ags.migration_log!**

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 29 —Å–µ–Ω—Ç—è–±—Ä—è 2025*  
*–ê–≤—Ç–æ—Ä: AI Assistant*  
*–°—Ç–∞—Ç—É—Å: –ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù*