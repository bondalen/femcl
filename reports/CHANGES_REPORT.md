# üìã –û–¢–ß–ï–¢ –û –í–ù–ï–°–ï–ù–ù–´–• –ò–ó–ú–ï–ù–ï–ù–ò–Ø–• –í –ü–†–ê–í–ò–õ–ê –ú–ò–ì–†–ê–¶–ò–ò

## üéØ –§–∞–π–ª: `SINGLE_TABLE_MIGRATION_RULES.md`

### ‚úÖ **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

#### 1. **–†–∞—Å—à–∏—Ä–µ–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Å—Ö–µ–º–µ MCL**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã**:
  - `migration_tasks` - –∑–∞–¥–∞—á–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
  - `mssql_base_types` / `postgres_base_types` - –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
  - `mssql_derived_types` / `postgres_derived_types` - –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Ç–∏–ø—ã
  - `problems` - –æ–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–∏
  - `problems_tb` / `problems_ct` / `problems_cm` - –ø—Ä–æ–±–ª–µ–º—ã –ø–æ —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤
  - `v_*` - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **—Å–≤—è–∑—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã**:
  - `mssql_foreign_key_columns` / `postgres_foreign_key_columns`
  - `mssql_index_columns` / `postgres_index_columns`
  - `mssql_primary_key_columns` / `postgres_primary_key_columns`
  - `mssql_unique_constraint_columns` / `postgres_unique_constraint_columns`

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **—Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏**:
  - `mssql_objects.id` ‚Üí `mssql_tables.object_id`
  - `postgres_objects.id` ‚Üí `postgres_tables.object_id`
  - `mssql_tables.id` ‚Üí `mssql_columns.table_id`
  - `postgres_tables.id` ‚Üí `postgres_columns.table_id`
  - `postgres_tables.source_table_id` ‚Üí `mssql_tables.id`

#### 2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- ‚úÖ –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `validate_migration_parameters()`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ `table_id`, `target_table_id`, `table_name`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∏–º–µ–Ω–∏ —Ç–∞–±–ª–∏—Ü—ã

#### 3. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫:
  - `MigrationError` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
  - `TableNotReadyError` - —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞
  - `DataIntegrityError` - –æ—à–∏–±–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
  - `ValidationError` - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### 4. **–†–∞—Å—à–∏—Ä–µ–Ω—ã –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª **"–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª **"–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"**
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–°—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** ~50
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:** 2
- **–ù–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –æ—à–∏–±–æ–∫:** 4
- **–£–ª—É—á—à–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** 5
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 3

### üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
1. **–ë–æ–ª–µ–µ –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ö–µ–º—ã `mcl`
2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–±–ª–µ–º
4. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
5. **–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2025-01-27*  
*–°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù*