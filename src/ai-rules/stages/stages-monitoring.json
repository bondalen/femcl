{
  "stagesMonitoring": {
    "metadata": {
      "version": "1.0.0",
      "lastUpdated": "2025-10-06",
      "description": "Правила мониторинга выполнения стадий"
    },
    "monitoringRules": {
      "statusTracking": {
        "states": ["pending", "in-progress", "completed", "failed", "skipped"],
        "transitions": "Логирование всех переходов между состояниями",
        "persistence": "Сохранение статуса в mcl.migration_log"
      },
      "progressReporting": {
        "frequency": "После каждой стадии",
        "content": [
          "stage_id - идентификатор стадии",
          "status - текущий статус",
          "start_time - время начала",
          "end_time - время завершения",
          "validation_results - результаты валидации",
          "errors - ошибки при выполнении"
        ],
        "format": "JSON структура в migration_log"
      },
      "errorHandling": {
        "onFailure": "Детальное логирование ошибки и контекста",
        "recovery": "Предложения по восстановлению",
        "escalation": "Уведомление о критических ошибках",
        "retry": "Возможность повторного выполнения"
      }
    },
    "loggingRules": {
      "migrationLog": {
        "table": "mcl.migration_log",
        "fields": {
          "stage_id": "Идентификатор стадии",
          "status": "Статус выполнения",
          "start_time": "Время начала",
          "end_time": "Время завершения",
          "validation_results": "Результаты валидации",
          "errors": "Ошибки и исключения",
          "context": "Контекст выполнения"
        }
      },
      "stageProgress": {
        "tracking": "Отслеживание прогресса по каждой стадии",
        "metrics": "Сбор метрик производительности",
        "reporting": "Генерация отчетов о прогрессе"
      }
    },
    "alertingRules": {
      "criticalErrors": {
        "conditions": [
          "Потеря данных при миграции",
          "Критические ошибки структуры БД",
          "Недоступность ресурсов"
        ],
        "actions": [
          "Немедленное уведомление",
          "Остановка процесса миграции",
          "Создание детального отчета"
        ]
      },
      "warnings": {
        "conditions": [
          "Медленное выполнение стадии",
          "Предупреждения валидации",
          "Нестандартные ситуации"
        ],
        "actions": [
          "Логирование предупреждения",
          "Продолжение с мониторингом",
          "Уведомление о ситуации"
        ]
      }
    }
  }
}