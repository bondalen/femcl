{
  "stagesExecution": {
    "metadata": {
      "version": "1.0.0",
      "lastUpdated": "2025-10-06",
      "description": "Правила выполнения стадий миграции"
    },
    "generalRules": {
      "stageLoading": {
        "source": "project-docs.json architecture.stages.rootStages",
        "description": "Загрузка структуры стадий из проектной документации",
        "method": "Чтение JSON файла и парсинг структуры rootStages"
      },
      "executionOrder": {
        "rule": "Строгое соблюдение predecessors",
        "validation": "Проверка готовности предшествующих стадий",
        "algorithm": "Построение графа зависимостей и топологическая сортировка"
      },
      "stageValidation": {
        "criteria": "Использование validationCriteria из атрибутов стадии",
        "logging": "Обязательное логирование результатов валидации",
        "failure": "Детальное описание причин неудачи"
      }
    },
    "stageTypes": {
      "preparation": {
        "description": "Подготовительные стадии (проверка подключений, валидация)",
        "rules": [
          "Проверка доступности ресурсов",
          "Валидация конфигурации",
          "Проверка подключений к БД"
        ],
        "validation": "Все подключения успешны, конфигурация корректна"
      },
      "migration": {
        "description": "Стадии миграции данных и структуры",
        "rules": [
          "Анализ зависимостей таблиц",
          "Последовательное выполнение миграции",
          "Контроль целостности данных"
        ],
        "validation": "Все объекты созданы, данные перенесены без потерь"
      },
      "validation": {
        "description": "Стадии проверки и тестирования",
        "rules": [
          "Полная валидация результатов миграции",
          "Тестирование производительности",
          "Функциональное тестирование"
        ],
        "validation": "Все критерии успеха выполнены"
      }
    },
    "executionFlow": {
      "initialization": {
        "steps": [
          "Загрузка структуры стадий из project-docs.json",
          "Построение графа зависимостей",
          "Определение готовых к выполнению стадий"
        ]
      },
      "execution": {
        "steps": [
          "Выбор следующей стадии для выполнения",
          "Выполнение операций стадии",
          "Валидация результатов по validationCriteria",
          "Логирование результатов в migration_log"
        ]
      },
      "completion": {
        "steps": [
          "Обновление статуса стадии",
          "Проверка готовности зависимых стадий",
          "Продолжение выполнения или завершение"
        ]
      }
    }
  }
}